/* Liquid Glass 3-way theme switcher (adapted from https://codepen.io/fooontic/pen/KwpRaGr)
   Positioned inside the global header, left of the burger icon.
*/

/* ---------- Theme variables (site-wide) ---------- */
html[data-theme="light"] {
  color-scheme: light;
  --bg: #f7f8fb;
  --text: #0f172a;
  --panel: rgba(255, 255, 255, 0.70);
  --panel-border: rgba(15, 23, 42, 0.14);
  --header-bg: rgba(255, 255, 255, 0.55);
  --header-border: rgba(15, 23, 42, 0.12);
  --link: #0f172a;
  --link-hover: #ff4fd8; /* codepen-ish pink */
  --menu-bg: #ffffff;
  --menu-text: #0f172a;
}

html[data-theme="dark"] {
  color-scheme: dark;
  --bg: #070a10;
  --text: #e6e8ee;
  --panel: rgba(255, 255, 255, 0.08);
  --panel-border: rgba(255, 255, 255, 0.16);
  --header-bg: rgba(10, 12, 18, 0.55);
  --header-border: rgba(255, 255, 255, 0.14);
  --link: #e6e8ee;
  --link-hover: #ff4fd8;
  --menu-bg: #0b0f1a;
  --menu-text: #e6e8ee;
}

html[data-theme="dim"] {
  color-scheme: dark;
  --bg: #0b1020;
  --text: #e8e9f3;
  --panel: rgba(255, 255, 255, 0.11);
  --panel-border: rgba(255, 255, 255, 0.18);
  --header-bg: rgba(11, 16, 32, 0.55);
  --header-border: rgba(255, 255, 255, 0.14);
  --link: #e8e9f3;
  --link-hover: #ff4fd8;
  --menu-bg: #111831;
  --menu-text: #e8e9f3;
}

/* Default if no theme set yet */
html:not([data-theme]) { 
  color-scheme: dark;
  --bg: #070a10;
  --text: #e6e8ee;
  --panel: rgba(255, 255, 255, 0.08);
  --panel-border: rgba(255, 255, 255, 0.16);
  --header-bg: rgba(10, 12, 18, 0.55);
  --header-border: rgba(255, 255, 255, 0.14);
  --link: #e6e8ee;
  --link-hover: #ff4fd8;
  --menu-bg: #0b0f1a;
  --menu-text: #e6e8ee;
}

/* ---------- Global theme application ---------- */
body {
  background: var(--bg);
  color: var(--text);
}

a { color: var(--link); }
a:hover { color: var(--link-hover); }

/* Panels + common blocks (broad, safe overrides) */
section.panel,
.panel,
.hero,
.hero-wrap,
.tile,
.card {
  background-color: var(--panel);
  border-color: var(--panel-border);
}

/* Global header: keep your semitransparent glass, but theme it */
.main-nav {
  background-color: var(--header-bg) !important;
  border-bottom-color: var(--header-border) !important;
}


/* Expanded menu background should fill the viewport and theme properly */
.main-nav__expandable,
.main-nav__expandable-inner {
  background: var(--menu-bg) !important;
}

.main-nav__link,
.main-nav__link-title,
.main-nav__link-descr {
  color: var(--menu-text) !important;
}

/* ---------- Switcher (mostly faithful to the CodePen) ---------- */
.c-theme {
  /* make it play nice in the header row */
  display: inline-flex;
  align-items: center;
  padding-right: 20px;
}

.c-theme fieldset {
  --h: 32px;            /* header-friendly height */
  --w: 132px;
  --pad: 6px;
  --radius: 999px;
  --glass: rgba(255, 255, 255, 0.18);
  --glass-border: rgba(255, 255, 255, 0.28);
  --shadow: rgba(0, 0, 0, 0.35);
  --pink: var(--link-hover);

  display: inline-flex;
  align-items: center;
  gap: 0;

  margin: 6px;
  padding: var(--pad);
  width: var(--w);
  height: var(--h);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--glass) 75%, transparent);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px var(--shadow);

  filter: url("#switcher");
}

.c-theme fieldset input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.c-theme fieldset label {
  width: calc((var(--w) - (var(--pad) * 2)) / 3);
  height: calc(var(--h) - (var(--pad) * 2));
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  cursor: pointer;
  position: relative;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.c-theme fieldset label svg {
  width: 18px;
  height: 18px;
  opacity: 0.85;
  transition: transform 180ms ease, opacity 180ms ease, filter 180ms ease;
  filter: drop-shadow(0 4px 12px rgba(0,0,0,.35));
}

.c-theme fieldset label:hover svg {
  opacity: 1;
  transform: translateY(-1px) scale(1.03);
  filter: drop-shadow(0 6px 18px rgba(255, 79, 216, 0.35));
}

.c-theme fieldset .thumb,
.c-theme fieldset .c-thumb {
  position: absolute;
  top: var(--pad);
  left: var(--pad);
  width: calc((var(--w) - (var(--pad) * 2)) / 3);
  height: calc(var(--h) - (var(--pad) * 2));
  border-radius: 999px;
  background: color-mix(in srgb, rgba(255,255,255,0.38) 55%, transparent);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.25),
    0 10px 25px rgba(0,0,0,0.30);
  transition: transform 240ms cubic-bezier(.2,.8,.2,1), background 240ms ease;
  pointer-events: none;
}

/* thumb positions */
.c-theme fieldset[data-active="1"] .thumb,
.c-theme fieldset[data-active="1"] .c-thumb { transform: translateX(0); }
.c-theme fieldset[data-active="2"] .thumb,
.c-theme fieldset[data-active="2"] .c-thumb { transform: translateX(calc((var(--w) - (var(--pad) * 2)) / 3)); }
.c-theme fieldset[data-active="3"] .thumb,
.c-theme fieldset[data-active="3"] .c-thumb { transform: translateX(calc(((var(--w) - (var(--pad) * 2)) / 3) * 2)); }

/* active icon highlight */
.c-theme fieldset[data-active="1"] label:nth-of-type(1) svg,
.c-theme fieldset[data-active="2"] label:nth-of-type(2) svg,
.c-theme fieldset[data-active="3"] label:nth-of-type(3) svg {
  opacity: 1;
  filter: drop-shadow(0 8px 22px rgba(255, 79, 216, 0.45));
}

/* Make it shrink slightly on small screens */
@media (max-width: 420px) {
  .c-theme fieldset {
    --h: 30px;
    --w: 120px;
  }
}
